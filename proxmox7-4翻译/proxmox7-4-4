proxmox7-4-4

第4章
图形用户界面
Proxmox VE 极其简单。无需安装单独的管理工具，所有操作都可以通过你的网络浏览器完成（首选最新版本的 Firefox 或 Google Chrome）。内置的 HTML5 控制台用于访问客户机控制台。作为一种替代，也可以使用 SPICE。
由于我们使用 Proxmox 集群文件系统（pmxcfs），你可以连接到任何节点以管理整个集群。每个节点都可以管理整个集群，无需专用的管理节点。
你可以使用任何现代浏览器与基于网络的管理界面。当 Proxmox VE 检测到你是从移动设备连接时，你将被重定向到更简单、基于触摸的用户界面。
可以通过 https://youripaddress:8006 访问网络界面（默认登录名为：root，密码在安装过程中指定）。

4.1 特性
• 无缝集成和管理 Proxmox VE 集群
• 使用 AJAX 技术实现资源的动态更新
• 通过 SSL 加密（https）安全访问所有虚拟机和容器
• 快速的搜索驱动界面，能够处理数百甚至数千个虚拟机
• 安全的 HTML5 控制台或 SPICE
• 所有对象（虚拟机、存储、节点等）的基于角色的权限管理
• 支持多种身份验证来源（例如，本地，MS ADS，LDAP，. . . ）
• 双因素身份验证（OATH，Yubikey）
• 基于 ExtJS 7.x JavaScript 框架

4.2 登录
当你连接到服务器时，首先会看到登录窗口。Proxmox VE 支持多种身份验证后端（领域），你可以在此处选择语言。GUI 已经翻译成 20 多种语言。
注意
通过在底部选择复选框，你可以在客户端保存用户名。这样在你下次登录时可以节省一些输入。

4.3 GUI 概览
Proxmox VE 用户界面由四个区域组成。
页头：位于顶部。显示状态信息并包含执行最重要操作的按钮。
资源树：位于左侧。一个导航树，你可以在这里选择特定对象。
内容面板：中心区域。在这里显示选定对象的配置选项和状态。
日志面板：位于底部。显示最近任务的日志条目。你可以双击这些日志条目以获取更多详细信息，或中止正在运行的任务。
注意
你可以缩小和扩大资源树和日志面板的大小，或完全隐藏日志面板。当你在小显示屏上工作并希望有更多空间查看其他内容时，这可能会有所帮助。

4.3.1 页头
在左上方，你首先看到的是 Proxmox 的 logo。在它旁边是当前运行的 Proxmox VE 
版本。在附近的搜索栏中，你可以搜索特定对象（虚拟机，容器，节点，...）。这有时比在资源树中选择对象更快。
搜索栏右边是身份（登录名）。齿轮符号是一个按钮，打开“我的设置”对话框。在那里，你可以自定义一些客户端用户界面设置（重置保存的登录名，重置保存的布局）。
页头的最右边包含四个按钮：
帮助：打开一个新的浏览器窗口，显示参考文档。
创建 VM：打开虚拟机创建向导。
创建 CT：打开容器创建向导。
注销：注销，并再次显示登录对话框。

4.3.2 我的设置
“我的设置”窗口允许你设置本地存储的设置。这些包括“仪表盘存储”，使你能够启用或禁用特定的存储来计算数据中心摘要中可见的总数。
如果没有选中任何存储，总数就是所有存储的总和，就像启用每一个存储一样。
在仪表盘设置下面，你会发现存储的用户名和一个清除它的按钮，以及一个按钮，用于将 GUI 中的每个布局重置为其默认值。
在右侧有 xterm.js 设置。这些包括以下选项：
字体系列：在 xterm.js 中使用的字体（例如 Arial）。
字体大小：要使用的首选字体大小。
字母间距：增加或减少文本中字母之间的间距。
行高：指定行的绝对高度。

4.3.3 资源树
这是主导航树。在树的顶部，你可以选择一些预定义的视图，这会改变树下方的结构。默认视图是服务器视图，它显示以下对象类型：
数据中心：包含群集范围的设置（对所有节点相关）。
节点：代表群集中的主机，客户端在其中运行。
客户端：VM，容器和模板。
存储：数据存储。
池：可以使用池对客户端进行分组以简化管理。
以下视图类型可用：
服务器视图：显示所有类型的对象，按节点分组。
文件夹视图：显示所有类型的对象，按对象类型分组。
池视图：显示 VM 和容器，按池分组。

4.3.4 日志面板
日志面板的主要目的是让你了解你的集群当前的情况。像创建一个新的虚拟机这样的操作在后台执行，我们称这种后台工作为任务。
这样的任务的任何输出都被保存在一个单独的日志文件中。你可以通过简单地双击一个任务日志条目来查看这个日志。在那里也可以中止正在运行的任务。
请注意，我们在这里显示来自所有集群节点的最近任务。所以你可以实时看到其他人正在另一个集群节点上进行的工作。
注意
我们从日志面板中删除了较旧和已完成的任务，以保持该列表的简洁。但是你仍然可以在节点面板的任务历史中找到这些任务。
一些短暂的操作简单地向所有集群成员发送日志。你可以在集群日志面板中看到这些消息。

4.4 内容面板
当你从资源树中选择一个项目时，相应的对象在内容面板中显示配置和状态信息。以下部分简要概述了这个功能。请参考参考文档中的相应章节以获取更详细的信息。

4.4.1 数据中心
在数据中心级别，你可以访问集群范围内的设置和信息。
• 搜索：执行集群范围内的节点、虚拟机、容器、存储设备和池的搜索。
• 概要：提供关于集群健康状况和资源使用的简要概述。
• 集群：提供创建或加入集群所需的功能和信息。
• 选项：查看和管理集群范围内的默认设置。
• 存储：提供管理集群存储的界面。
• 备份：安排备份任务。这在集群范围内运行，所以在调度时，集群上的虚拟机/容器的位置并不重要。
• 复制：查看和管理复制任务。
• 权限：管理用户、组和API令牌的权限，以及LDAP、MS-AD和两因素认证。
• HA：管理Proxmox VE高可用性。
• ACME：为服务器节点设置ACME（Let's Encrypt）证书。
• 防火墙：配置并为Proxmox防火墙创建集群范围的模板。
• 指标服务器：为Proxmox VE定义外部指标服务器。
• 支持：显示你的支持订阅信息。

4.4.2 节点
在此级别，你可以单独管理集群中的节点。
顶部的标题有一些有用的按钮，如重启、关闭、Shell、批量操作和帮助。Shell有noVNC、SPICE和xterm.js的选项。批量操作有批量启动、批量关闭和批量迁移的选项。
• 搜索：搜索节点中的虚拟机、容器、存储设备和池。
• 概览：显示节点资源使用情况的简要概述。
• 笔记：使用Markdown语法编写自定义评论，参考F.1节。
• Shell：获取节点的shell接口。
• 系统：配置网络、DNS和时间设置，并访问系统日志。
• 更新：升级系统并查看可用的新包。
• 防火墙：管理特定节点的Proxmox防火墙。
• 磁盘：查看已连接磁盘的概览，并管理它们的使用方式。
• Ceph：只有在你的主机上安装了Ceph服务器时才使用。在这种情况下，你可以在这里管理你的Ceph集群并查看它的状态。
• 复制：查看和管理复制任务。
• 任务历史：查看过去的任务列表。
• 订阅：上传订阅密钥，并生成系统报告以用于支持案例。

4.4.3 客户端
客户端有两种不同的类型，都可以转换为模板。其中之一是基于内核的虚拟机（KVM），另一个是Linux容器（LXC）。这些的导航大致相同；只是一些选项有所不同。
要访问各种客户端管理界面，请从左侧菜单中选择一个虚拟机或容器。标题包含诸如电源管理、迁移、控制台访问和类型、克隆、HA和帮助等项目的命令。其中一些按钮包含下拉菜单，
例如，关闭还包含其他电源选项，控制台包含不同的控制台类型：SPICE、noVNC和xterm.js。
右侧的面板包含一个界面，可以选择左侧菜单上的任何项目。可用的接口如下。
• 概览：提供虚拟机活动的简要概述和一个用于Markdown语法第F.1节评论的注释字段。
• 控制台：访问虚拟机/容器的交互式控制台。
• （KVM）硬件：定义KVM虚拟机可用的硬件。
• （LXC）资源：定义LXC可用的系统资源。
• （LXC）网络：配置容器的网络设置。
• （LXC）DNS：配置容器的DNS设置。
• 选项：管理客户端选项。
• 任务历史：查看与所选客户端相关的所有以前的任务。
• （KVM）监视器：与KVM进程的交互式通信接口。
• 备份：创建和恢复系统备份。
• 复制：查看和管理所选客户端的复制任务。
• 快照：创建和恢复虚拟机快照。
• 防火墙：配置虚拟机级别的防火墙。
• 权限：管理所选客户端的权限。

4.4.4 存储
与客户端接口一样，存储接口由左侧的某些存储元素的菜单和右侧的管理这些元素的接口组成。
在这个视图中，我们有一个两部分的分割视图。左侧是存储选项，右侧将显示所选选项的内容。
• 概览：显示有关存储的重要信息，例如类型、使用情况以及它存储的内容。
• 内容：存储的每种内容类型都有一个菜单项，例如备份、ISO镜像、CT模板。
• 权限：管理存储的权限。

4.4.5 资源池
再次，资源池视图包括两个部分：左侧的菜单，以及右侧的每个菜单项的相应接口。
• 概览：显示资源池的描述。
• 成员：显示和管理资源池成员（客户端和存储）。
• 权限：管理资源池的权限。

4.5 标签
出于组织目的，可以在客户端上设置标签。这些目前只具有信息价值，并且在图形用户界面中默认在两个地方显示，即资源树和当选中客户端时的状态行。
可以通过点击铅笔图标，在该客户端的状态行中添加、编辑和移除标签。在标签具有所需的值后，可以点击复选标记按钮来应用更改，或点击X按钮取消编辑。
标签也可以通过命令行界面设置，其中多个标签用分号分隔，例如：
qm set ID --tags myfirsttag;mysecondtag

4.5.1 样式
为适应各种使用场景和偏好，数据中心配置中有一些选项可以帮助管理员控制标签的行为和样式，例如颜色、排序和基本权限设置。
默认情况下，标签的颜色以确定的方式从其文本中派生，但可以在数据中心配置中覆盖（背景颜色以及文本颜色）为十六进制RGB值。您也可以通过命令行界面设置这些覆盖，例如：
pvesh set /cluster/options --tag-style color-map=example:000000:FFFFFF
将标签示例的背景颜色设置为黑色（#000000）和文本颜色设置为白色（#FFFFFF）。
您还可以更改树中标签的样式，以及标签是否应按字母顺序排序（默认）或应保留其从客户端配置的顺序。

4.5.2 权限
默认情况下，具有对客户端(/vms/ID)拥有VM.Config.Options权限的用户可以设置他们想要的任何标签。如果你想限制这种行为，可以通过数据中心配置设置各种模式：
    允许的标签列表
    现有的标签
    完全没有标签
    请注意，无论这里的设置如何，对/具有Sys.Modify权限的用户总是能够设置或删除任何标签。另外，还有一个可配置的已注册标签列表，这些标签也需要在/
    上拥有Sys.Modify权限才能独立于模式添加或移除。
    有关确切选项的更多详细信息，请参阅数据中心配置第C.1节。